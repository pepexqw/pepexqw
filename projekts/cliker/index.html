<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Накликай Шаурму!</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #2B2D30;
            color: #EFEFEF;
            font-family: Arial, sans-serif;
        }
        
        #shaurma {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            cursor: pointer;
            user-select: none;
        }
        
        #explosion {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
        }
        
        #cloud {
            position: absolute;
            width: 100px;
            height: auto;
            animation: flyCloud linear infinite;
        }
        
        @keyframes flyCloud {
            from {transform: translateX(-100vw);}
            to   {transform: translateX(100vw);}
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body oncontextmenu="return false;" tabindex="0">
<div style="text-align:center;">
    <img id="shaurma" src="шаурма-с-курицей.png" alt="Шаурма"/>
    <br/>
    <span id="clicksCounter">Кликов: 0</span>
    <button onclick="resetClicks()">Сбросить клики</button>
</div>

<!-- Изображения -->
<img id="explosion" class="hidden" src="взрыв.png" />
<img id="cloud" class="hidden" src="облока.png" />

<!-- Аудиофайлы -->
<audio id="bitvaAudio" src="bitva.mp3" preload="auto"></audio>
<audio id="hitSound" src="урон.mp3" preload="auto"></audio>

<script>
let clicksCount = 0;
const shaurmaImg = document.getElementById('shaurma');
const explosionImg = document.getElementById('explosion');
const cloudImg = document.getElementById('cloud');
const hitSound = document.getElementById('hitSound');
const bitvaAudio = document.getElementById('bitvaAudio');
const counterDisplay = document.getElementById('clicksCounter');

// Скорость перемещения объектов
let speedFactor = 1;

// Обработчик кликов по изображению
shaurmaImg.onclick = function() {
    if (clicksCount >= 100 && clicksCount % 20 === 0) {
        explodeShaurma();
        return;
    }
    
    clicksCount++;
    updateCounter();
    teleportShaurma();
    moveClouds();
    playHitSound();
};

// Воспроизведение звука удара
function playHitSound() {
    hitSound.currentTime = 0;
    hitSound.play();
}

// Телепортация шаурмы
function teleportShaurma() {
    const maxOffset = 300;
    const offsetX = Math.floor(Math.random() * maxOffset) - maxOffset / 2;
    const offsetY = Math.floor(Math.random() * maxOffset) - maxOffset / 2;
    shaurmaImg.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
}

// Перемещение облаков
function moveClouds() {
    cloudImg.style.animationDuration = `${speedFactor}s`; // Меняем скорость движения облака
    speedFactor += 0.1; // Постепенно увеличиваем скорость
}

// Взрыв шаурмы
function explodeShaurma() {
    console.log("Взрыв!");
    explosionImg.classList.toggle('hidden');
    setTimeout(() => {
        explosionImg.classList.add('hidden');
        clicksCount = 0;
        updateCounter();
        shaurmaImg.style.display = 'none';
        showBitvaScreen();
    }, 1000);
}

// Показ экрана битвы
function showBitvaScreen() {
    bitvaAudio.play();
    alert("Хватит, мне надоело что ты кликаешь по мне! Я тебя убью");
}

// Функция обновления отображаемого количества кликов
function updateCounter() {
    counterDisplay.textContent = `Кликов: ${clicksCount}`;
}

// Сброс кликов
function resetClicks() {
    clicksCount = 0;
    updateCounter();
    shaurmaImg.style.display = '';
    explosionImg.classList.add('hidden');
    speedFactor = 1;
}

document.body.focus(); // Для предотвращения выбора текста
</script>
</body>
</html>
