<!DOCTYPE html><html lang=ru><head><meta charset=UTF-8 /><meta name=viewport content="width=device-width, initial-scale=1.0" /><title>Neural Terminal - GPT-5 Mini</title><script src=https://js.puter.com/v2/ ></script><style>*{margin:0;padding:0;box-sizing:border-box;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}body{background:linear-gradient(135deg,#0a0a0a 0%,#1a1a1a 100%);color:#0f0;line-height:1.6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;overflow:hidden}.app-container{display:flex;flex-direction:column;width:100%;max-width:900px;height:95vh;background:rgba(10,10,10,.95);border-radius:8px;box-shadow:0 0 20px rgba(0,255,0,.1),inset 0 1px 0 rgba(255,255,255,.1);overflow:hidden;backdrop-filter:blur(10px);border:1px solid rgba(0,255,0,.2);animation:terminalGlow 4s ease-in-out infinite alternate}@keyframes terminalGlow{from{box-shadow:0 0 20px rgba(0,255,0,.1),inset 0 1px 0 rgba(255,255,255,.1)}to{box-shadow:0 0 30px rgba(0,255,0,.2),inset 0 1px 0 rgba(255,255,255,.1)}}.header{padding:15px 20px;border-bottom:1px solid rgba(0,255,0,.3);display:flex;align-items:center;justify-content:space-between;background:rgba(5,5,5,.9);position:relative}.header::before{content:'';position:absolute;bottom:0;left:0;width:100%;height:1px;background:linear-gradient(90deg,transparent,#0f0,transparent)}.logo{display:flex;align-items:center;gap:12px;font-weight:600;font-size:16px;color:#0f0;text-shadow:0 0 10px rgba(0,255,0,.5)}.logo-icon{width:32px;height:32px;background:linear-gradient(135deg,#0f0 0%,#080 100%);border-radius:4px;display:flex;align-items:center;justify-content:center;color:#000;font-weight:bold;box-shadow:0 0 15px rgba(0,255,0,.5);animation:pulse 2s infinite}.chat-container{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:15px;background:radial-gradient(circle at 20% 50%,rgba(0,255,0,.05) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(0,255,0,.03) 0%,transparent 50%)}.message{max-width:85%;padding:15px 20px;border-radius:8px;line-height:1.5;animation:messageAppear .3s ease-out;position:relative;border:1px solid rgba(0,255,0,.1);background:rgba(15,15,15,.8);box-shadow:0 4px 12px rgba(0,0,0,.3)}@keyframes messageAppear{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.user-message{align-self:flex-end;background:linear-gradient(135deg,#030 0%,#010 100%);color:#0f0;border:1px solid rgba(0,255,0,.3);border-bottom-right-radius:2px;box-shadow:0 0 10px rgba(0,255,0,.2)}.ai-message{align-self:flex-start;background:rgba(10,10,10,.9);border:1px solid rgba(0,255,0,.2);border-bottom-left-radius:2px;color:#0f0}.input-area{padding:20px;display:flex;flex-direction:column;gap:15px;background:rgba(5,5,5,.9);border-top:1px solid rgba(0,255,0,.3);position:relative}.input-area::before{content:'';position:absolute;top:0;left:0;width:100%;height:1px;background:linear-gradient(90deg,transparent,#0f0,transparent)}.input-wrapper{position:relative;display:flex;align-items:center;gap:12px}textarea{flex:1;padding:15px 20px;background:rgba(10,10,10,.9);border:1px solid rgba(0,255,0,.3);border-radius:6px;resize:none;font-size:14px;outline:none;transition:all .3s ease;color:#0f0;max-height:120px;overflow-y:auto;box-shadow:inset 0 2px 4px rgba(0,0,0,.5);font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}textarea::placeholder{color:#080;font-style:italic}textarea:focus{border-color:#0f0;box-shadow:inset 0 2px 4px rgba(0,0,0,.5),0 0 10px rgba(0,255,0,.3)}.char-counter{position:absolute;bottom:12px;right:20px;font-size:11px;color:#080;transition:color .3s ease;background:rgba(0,0,0,.7);padding:2px 6px;border-radius:3px}.char-counter.warning{color:#f44;animation:warningPulse 1s infinite}@keyframes warningPulse{0%,100%{opacity:1}50%{opacity:.7}}.button-group{display:flex;gap:12px}button{flex:1;background:linear-gradient(135deg,#030 0%,#010 100%);color:#0f0;border:1px solid rgba(0,255,0,.3);border-radius:6px;padding:14px 20px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 4px 12px rgba(0,0,0,.3);font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace;font-size:13px;text-transform:uppercase;letter-spacing:.5px}button:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.4),0 0 15px rgba(0,255,0,.3);border-color:rgba(0,255,0,.5)}button:active{transform:translateY(0)}button:disabled{background:#111;color:#040;transform:none;box-shadow:none;cursor:not-allowed;border-color:rgba(0,255,0,.1)}#stopButton{background:linear-gradient(135deg,#300 0%,#100 100%);color:#f44;border:1px solid rgba(255,68,68,.3);display:none}#stopButton:hover{box-shadow:0 6px 16px rgba(0,0,0,.4),0 0 15px rgba(255,68,68,.3);border-color:rgba(255,68,68,.5)}.typing-indicator{display:flex;align-items:center;gap:8px;color:#080;font-size:13px;padding:15px 20px;background:rgba(10,10,10,.9);border-radius:8px;align-self:flex-start;max-width:180px;border:1px solid rgba(0,255,0,.2);animation:pulse 2s infinite;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}@keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}.typing-dots{display:flex;gap:4px}.typing-dot{width:8px;height:8px;border-radius:50%;background-color:#0f0;animation:typing 1.4s infinite ease-in-out;box-shadow:0 0 5px rgba(0,255,0,.5)}.typing-dot:nth-child(1){animation-delay:0s}.typing-dot:nth-child(2){animation-delay:.2s}.typing-dot:nth-child(3){animation-delay:.4s}@keyframes typing{0%,60%,100%{transform:translateY(0);opacity:.5}30%{transform:translateY(-5px);opacity:1}}.error-message{color:#f44;padding:12px 16px;background:rgba(51,0,0,.3);border-radius:6px;margin-top:8px;font-size:13px;border:1px solid rgba(255,68,68,.3);animation:shake .5s ease-in-out;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}@keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-5px)}40%,80%{transform:translateX(5px)}}.model-info{font-size:11px;color:#080;background:rgba(0,20,0,.3);padding:6px 12px;border-radius:4px;border:1px solid rgba(0,255,0,.2);font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}.welcome-message{text-align:center;padding:40px 20px;color:#080;font-size:14px;animation:fadeIn 1s ease-out;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.message-content{white-space:pre-wrap;word-wrap:break-word;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}.chat-container::-webkit-scrollbar{width:8px}.chat-container::-webkit-scrollbar-track{background:rgba(10,10,10,.5);border-radius:4px}.chat-container::-webkit-scrollbar-thumb{background:rgba(0,255,0,.3);border-radius:4px}.chat-container::-webkit-scrollbar-thumb:hover{background:rgba(0,255,0,.5)}@media(max-width:768px){.app-container{height:100vh;border-radius:0}.message{max-width:95%}.input-area{padding:15px}body{padding:0}}.app-container{animation:containerAppear .5s ease-out}@keyframes containerAppear{from{opacity:0;transform:scale(.95) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}.matrix-bg{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1;opacity:.1}</style></head><body><div class=matrix-bg id=matrixBg></div><div class=app-container><div class=header><div class=logo><div class=logo-icon>></div><span>NEURAL_TERMINAL</span></div><div class=model-info>GPT-5_MINI // v2.1.4</div></div><div class=chat-container id=chatContainer><div class=welcome-message><h3>// NEURAL TERMINAL ONLINE</h3><p>Введите запрос для инициализации диалога...</p></div></div>
        
        <div class=input-area>
            <div class=input-wrapper>
                <textarea id=messageInput placeholder="Введите команду..." rows=1></textarea><div class=char-counter id=charCounter>0/500</div></div><div class=button-group><button id=sendButton><svg width=18 height=18 viewBox="0 0 24 24" fill=none xmlns=http://www.w3.org/2000/svg><path d="M22 2L11 13" stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round /><path d="M22 2L15 22L11 13L2 9L22 2Z" stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round /></svg> Execute</button> <button id=stopButton><svg width=18 height=18 viewBox="0 0 24 24" fill=none xmlns=http://www.w3.org/2000/svg><rect x=6 y=6 width=12 height=12 rx=1 fill=currentColor /></svg> Terminate</button></div></div></div><script>document.addEventListener("DOMContentLoaded",function(){function y(){function e(){i.fillStyle="rgba(0, 0, 0, 0.04)";i.fillRect(0,0,n.width,n.height);i.fillStyle="#00ff00";i.font=r+"px monospace";for(let f=0;f<t.length;f++){const e=u[Math.floor(Math.random()*u.length)];i.fillText(e,f*r,t[f]*r);t[f]*r>n.height&&Math.random()>.975&&(t[f]=0);t[f]++}}const n=document.createElement("canvas");v.appendChild(n);const i=n.getContext("2d");n.width=window.innerWidth;n.height=window.innerHeight;const u="01".split(""),r=12,f=n.width/r,t=[];for(let n=0;n<f;n++)t[n]=1;setInterval(e,33)}function c(){const i=n.value.trim();if(i!==""){if(i.length>500){a("Превышен лимит символов. Максимум: 500.");return}s&&(s.style.display="none");l(i,"user");n.value="";n.style.height="auto";t.textContent="0/500";t.classList.remove("warning");u.disabled=!0;n.disabled=!0;f.style.display="flex";r=!0;w();h=puter.ai.chat(i,{model:"gpt-5-mini",max_tokens:1e4}).then(n=>{r&&(o(),l(n,"ai"))}).catch(n=>{r&&(o(),a("Ошибка подключения к нейросети. Повторите запрос."),console.error("AI Error:",n))}).finally(()=>{u.disabled=!1,n.disabled=!1,n.focus(),f.style.display="none",r=!1,h=null})}}function p(){if(r){r=!1;f.style.display="none";o();const t=document.createElement("div");t.classList.add("message","ai-message");t.innerHTML='<div class="message-content">// Генерация прервана пользователем<\/div>';i.appendChild(t);e();u.disabled=!1;n.disabled=!1;n.focus()}}function l(n,t){const r=document.createElement("div");r.classList.add("message");r.classList.add(t==="user"?"user-message":"ai-message");const u=document.createElement("div");u.classList.add("message-content");u.textContent=n;r.appendChild(u);i.appendChild(r);e()}function w(){const n=document.createElement("div");n.classList.add("typing-indicator");n.id="typingIndicator";n.innerHTML=`
                    <span>Генерация ответа</span>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                `;i.appendChild(n);e()}function o(){const n=document.getElementById("typingIndicator");n&&n.remove()}function a(n){const t=document.createElement("div");t.classList.add("error-message");t.textContent=n;i.appendChild(t);e();setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},5e3)}function e(){i.scrollTop=i.scrollHeight}const i=document.getElementById("chatContainer"),n=document.getElementById("messageInput"),u=document.getElementById("sendButton"),f=document.getElementById("stopButton"),t=document.getElementById("charCounter"),s=document.querySelector(".welcome-message"),v=document.getElementById("matrixBg");let r=!1,h=null;y();n.addEventListener("input",function(){const n=this.value.length;t.textContent=`${n}/500`;n>500?(this.value=this.value.substring(0,500),t.textContent="500/500",t.classList.add("warning")):n>450?t.classList.add("warning"):t.classList.remove("warning");this.style.height="auto";this.style.height=this.scrollHeight+"px";this.style.overflowY=this.scrollHeight>120?"auto":"hidden"});n.addEventListener("keydown",function(n){n.key!=="Enter"||n.shiftKey||(n.preventDefault(),c())});u.addEventListener("click",c);f.addEventListener("click",p);n.focus()})</script></body></html><!DOCTYPE html><html lang=ru><head><meta charset=UTF-8 /><meta name=viewport content="width=device-width, initial-scale=1.0" /><title>Neural Terminal - GPT-5 Mini</title><script src=https://js.puter.com/v2/ ></script><style>*{margin:0;padding:0;box-sizing:border-box;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}body{background:linear-gradient(135deg,#0a0a0a 0%,#1a1a1a 100%);color:#0f0;line-height:1.6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;overflow:hidden}.app-container{display:flex;flex-direction:column;width:100%;max-width:900px;height:95vh;background:rgba(10,10,10,.95);border-radius:8px;box-shadow:0 0 20px rgba(0,255,0,.1),inset 0 1px 0 rgba(255,255,255,.1);overflow:hidden;backdrop-filter:blur(10px);border:1px solid rgba(0,255,0,.2);animation:terminalGlow 4s ease-in-out infinite alternate}@keyframes terminalGlow{from{box-shadow:0 0 20px rgba(0,255,0,.1),inset 0 1px 0 rgba(255,255,255,.1)}to{box-shadow:0 0 30px rgba(0,255,0,.2),inset 0 1px 0 rgba(255,255,255,.1)}}.header{padding:15px 20px;border-bottom:1px solid rgba(0,255,0,.3);display:flex;align-items:center;justify-content:space-between;background:rgba(5,5,5,.9);position:relative}.header::before{content:'';position:absolute;bottom:0;left:0;width:100%;height:1px;background:linear-gradient(90deg,transparent,#0f0,transparent)}.logo{display:flex;align-items:center;gap:12px;font-weight:600;font-size:16px;color:#0f0;text-shadow:0 0 10px rgba(0,255,0,.5)}.logo-icon{width:32px;height:32px;background:linear-gradient(135deg,#0f0 0%,#080 100%);border-radius:4px;display:flex;align-items:center;justify-content:center;color:#000;font-weight:bold;box-shadow:0 0 15px rgba(0,255,0,.5);animation:pulse 2s infinite}.chat-container{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:15px;background:radial-gradient(circle at 20% 50%,rgba(0,255,0,.05) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(0,255,0,.03) 0%,transparent 50%)}.message{max-width:85%;padding:15px 20px;border-radius:8px;line-height:1.5;animation:messageAppear .3s ease-out;position:relative;border:1px solid rgba(0,255,0,.1);background:rgba(15,15,15,.8);box-shadow:0 4px 12px rgba(0,0,0,.3)}@keyframes messageAppear{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.user-message{align-self:flex-end;background:linear-gradient(135deg,#030 0%,#010 100%);color:#0f0;border:1px solid rgba(0,255,0,.3);border-bottom-right-radius:2px;box-shadow:0 0 10px rgba(0,255,0,.2)}.ai-message{align-self:flex-start;background:rgba(10,10,10,.9);border:1px solid rgba(0,255,0,.2);border-bottom-left-radius:2px;color:#0f0}.input-area{padding:20px;display:flex;flex-direction:column;gap:15px;background:rgba(5,5,5,.9);border-top:1px solid rgba(0,255,0,.3);position:relative}.input-area::before{content:'';position:absolute;top:0;left:0;width:100%;height:1px;background:linear-gradient(90deg,transparent,#0f0,transparent)}.input-wrapper{position:relative;display:flex;align-items:center;gap:12px}textarea{flex:1;padding:15px 20px;background:rgba(10,10,10,.9);border:1px solid rgba(0,255,0,.3);border-radius:6px;resize:none;font-size:14px;outline:none;transition:all .3s ease;color:#0f0;max-height:120px;overflow-y:auto;box-shadow:inset 0 2px 4px rgba(0,0,0,.5);font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}textarea::placeholder{color:#080;font-style:italic}textarea:focus{border-color:#0f0;box-shadow:inset 0 2px 4px rgba(0,0,0,.5),0 0 10px rgba(0,255,0,.3)}.char-counter{position:absolute;bottom:12px;right:20px;font-size:11px;color:#080;transition:color .3s ease;background:rgba(0,0,0,.7);padding:2px 6px;border-radius:3px}.char-counter.warning{color:#f44;animation:warningPulse 1s infinite}@keyframes warningPulse{0%,100%{opacity:1}50%{opacity:.7}}.button-group{display:flex;gap:12px}button{flex:1;background:linear-gradient(135deg,#030 0%,#010 100%);color:#0f0;border:1px solid rgba(0,255,0,.3);border-radius:6px;padding:14px 20px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 4px 12px rgba(0,0,0,.3);font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace;font-size:13px;text-transform:uppercase;letter-spacing:.5px}button:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.4),0 0 15px rgba(0,255,0,.3);border-color:rgba(0,255,0,.5)}button:active{transform:translateY(0)}button:disabled{background:#111;color:#040;transform:none;box-shadow:none;cursor:not-allowed;border-color:rgba(0,255,0,.1)}#stopButton{background:linear-gradient(135deg,#300 0%,#100 100%);color:#f44;border:1px solid rgba(255,68,68,.3);display:none}#stopButton:hover{box-shadow:0 6px 16px rgba(0,0,0,.4),0 0 15px rgba(255,68,68,.3);border-color:rgba(255,68,68,.5)}.typing-indicator{display:flex;align-items:center;gap:8px;color:#080;font-size:13px;padding:15px 20px;background:rgba(10,10,10,.9);border-radius:8px;align-self:flex-start;max-width:180px;border:1px solid rgba(0,255,0,.2);animation:pulse 2s infinite;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}@keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}.typing-dots{display:flex;gap:4px}.typing-dot{width:8px;height:8px;border-radius:50%;background-color:#0f0;animation:typing 1.4s infinite ease-in-out;box-shadow:0 0 5px rgba(0,255,0,.5)}.typing-dot:nth-child(1){animation-delay:0s}.typing-dot:nth-child(2){animation-delay:.2s}.typing-dot:nth-child(3){animation-delay:.4s}@keyframes typing{0%,60%,100%{transform:translateY(0);opacity:.5}30%{transform:translateY(-5px);opacity:1}}.error-message{color:#f44;padding:12px 16px;background:rgba(51,0,0,.3);border-radius:6px;margin-top:8px;font-size:13px;border:1px solid rgba(255,68,68,.3);animation:shake .5s ease-in-out;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}@keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-5px)}40%,80%{transform:translateX(5px)}}.model-info{font-size:11px;color:#080;background:rgba(0,20,0,.3);padding:6px 12px;border-radius:4px;border:1px solid rgba(0,255,0,.2);font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}.welcome-message{text-align:center;padding:40px 20px;color:#080;font-size:14px;animation:fadeIn 1s ease-out;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.message-content{white-space:pre-wrap;word-wrap:break-word;font-family:'SF Mono','Cascadia Code','Fira Code',Consolas,monospace}.chat-container::-webkit-scrollbar{width:8px}.chat-container::-webkit-scrollbar-track{background:rgba(10,10,10,.5);border-radius:4px}.chat-container::-webkit-scrollbar-thumb{background:rgba(0,255,0,.3);border-radius:4px}.chat-container::-webkit-scrollbar-thumb:hover{background:rgba(0,255,0,.5)}@media(max-width:768px){.app-container{height:100vh;border-radius:0}.message{max-width:95%}.input-area{padding:15px}body{padding:0}}.app-container{animation:containerAppear .5s ease-out}@keyframes containerAppear{from{opacity:0;transform:scale(.95) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}.matrix-bg{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1;opacity:.1}</style></head><body><div class=matrix-bg id=matrixBg></div><div class=app-container><div class=header><div class=logo><div class=logo-icon>></div><span>NEURAL_TERMINAL</span></div><div class=model-info>GPT-5_MINI // v2.1.4</div></div><div class=chat-container id=chatContainer><div class=welcome-message><h3>// NEURAL TERMINAL ONLINE</h3><p>Введите запрос для инициализации диалога...</p></div></div>
        
        <div class=input-area>
            <div class=input-wrapper>
                <textarea id=messageInput placeholder="Введите команду..." rows=1></textarea><div class=char-counter id=charCounter>0/500</div></div><div class=button-group><button id=sendButton><svg width=18 height=18 viewBox="0 0 24 24" fill=none xmlns=http://www.w3.org/2000/svg><path d="M22 2L11 13" stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round /><path d="M22 2L15 22L11 13L2 9L22 2Z" stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round /></svg> Execute</button> <button id=stopButton><svg width=18 height=18 viewBox="0 0 24 24" fill=none xmlns=http://www.w3.org/2000/svg><rect x=6 y=6 width=12 height=12 rx=1 fill=currentColor /></svg> Terminate</button></div></div></div><script>document.addEventListener("DOMContentLoaded",function(){function y(){function e(){i.fillStyle="rgba(0, 0, 0, 0.04)";i.fillRect(0,0,n.width,n.height);i.fillStyle="#00ff00";i.font=r+"px monospace";for(let f=0;f<t.length;f++){const e=u[Math.floor(Math.random()*u.length)];i.fillText(e,f*r,t[f]*r);t[f]*r>n.height&&Math.random()>.975&&(t[f]=0);t[f]++}}const n=document.createElement("canvas");v.appendChild(n);const i=n.getContext("2d");n.width=window.innerWidth;n.height=window.innerHeight;const u="01".split(""),r=12,f=n.width/r,t=[];for(let n=0;n<f;n++)t[n]=1;setInterval(e,33)}function c(){const i=n.value.trim();if(i!==""){if(i.length>500){a("Превышен лимит символов. Максимум: 500.");return}s&&(s.style.display="none");l(i,"user");n.value="";n.style.height="auto";t.textContent="0/500";t.classList.remove("warning");u.disabled=!0;n.disabled=!0;f.style.display="flex";r=!0;w();h=puter.ai.chat(i,{model:"gpt-5-mini",max_tokens:1e4}).then(n=>{r&&(o(),l(n,"ai"))}).catch(n=>{r&&(o(),a("Ошибка подключения к нейросети. Повторите запрос."),console.error("AI Error:",n))}).finally(()=>{u.disabled=!1,n.disabled=!1,n.focus(),f.style.display="none",r=!1,h=null})}}function p(){if(r){r=!1;f.style.display="none";o();const t=document.createElement("div");t.classList.add("message","ai-message");t.innerHTML='<div class="message-content">// Генерация прервана пользователем<\/div>';i.appendChild(t);e();u.disabled=!1;n.disabled=!1;n.focus()}}function l(n,t){const r=document.createElement("div");r.classList.add("message");r.classList.add(t==="user"?"user-message":"ai-message");const u=document.createElement("div");u.classList.add("message-content");u.textContent=n;r.appendChild(u);i.appendChild(r);e()}function w(){const n=document.createElement("div");n.classList.add("typing-indicator");n.id="typingIndicator";n.innerHTML=`
                    <span>Генерация ответа</span>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                `;i.appendChild(n);e()}function o(){const n=document.getElementById("typingIndicator");n&&n.remove()}function a(n){const t=document.createElement("div");t.classList.add("error-message");t.textContent=n;i.appendChild(t);e();setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},5e3)}function e(){i.scrollTop=i.scrollHeight}const i=document.getElementById("chatContainer"),n=document.getElementById("messageInput"),u=document.getElementById("sendButton"),f=document.getElementById("stopButton"),t=document.getElementById("charCounter"),s=document.querySelector(".welcome-message"),v=document.getElementById("matrixBg");let r=!1,h=null;y();n.addEventListener("input",function(){const n=this.value.length;t.textContent=`${n}/500`;n>500?(this.value=this.value.substring(0,500),t.textContent="500/500",t.classList.add("warning")):n>450?t.classList.add("warning"):t.classList.remove("warning");this.style.height="auto";this.style.height=this.scrollHeight+"px";this.style.overflowY=this.scrollHeight>120?"auto":"hidden"});n.addEventListener("keydown",function(n){n.key!=="Enter"||n.shiftKey||(n.preventDefault(),c())});u.addEventListener("click",c);f.addEventListener("click",p);n.focus()})</script></body></html>