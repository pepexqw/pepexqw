<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Чат с GPT-5 Nano</title><style>:root{--bg-color:#1a1a1a;--chat-bg:#2d2d2d;--text-color:#e8eaed;--user-msg-bg:#0b5394;--ai-msg-bg:#404040;--input-bg:#3c3c3c;--input-border:#5f6368;--button-bg:#0b5394;--button-hover:#1a73e8;--accent-color:#8ab4f8;--shadow:rgba(0, 0, 0, 0.5);--msg-shadow:rgba(0, 0, 0, 0.3);--disabled-bg:#5a5a5a;--disabled-text:#a0a0a0}.light-theme{--bg-color:#f0f5ff;--chat-bg:#ffffff;--text-color:#333333;--user-msg-bg:#d6e4ff;--ai-msg-bg:#f1f3f4;--input-bg:#ffffff;--input-border:#b8c7e0;--button-bg:#5d8aa8;--button-hover:#4a7699;--accent-color:#3a6ea5;--shadow:rgba(0, 0, 0, 0.1);--msg-shadow:rgba(0, 0, 0, 0.05);--disabled-bg:#e9ecef;--disabled-text:#6c757d}*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}body{background-color:var(--bg-color);color:var(--text-color);transition:background-color .3s,color .3s;height:100vh;display:flex;flex-direction:column}header{padding:18px 25px;display:flex;justify-content:space-between;align-items:center;background-color:var(--chat-bg);box-shadow:0 2px 15px var(--shadow);z-index:10;border-bottom:1px solid var(--input-border)}h1{font-size:1.6rem;color:var(--accent-color);font-weight:600}.theme-toggle{background:0 0;border:1px solid var(--accent-color);color:var(--accent-color);padding:10px 18px;border-radius:25px;cursor:pointer;transition:all .3s;font-size:.9rem;font-weight:500}.theme-toggle:hover{background-color:var(--accent-color);color:var(--bg-color);transform:translateY(-2px);box-shadow:0 4px 8px var(--shadow)}.chat-container{flex:1;display:flex;flex-direction:column;max-width:900px;margin:0 auto;width:100%;padding:25px;overflow:hidden;gap:20px}.messages-container{flex:1;overflow-y:auto;padding:25px;background-color:var(--chat-bg);border-radius:15px;box-shadow:0 4px 20px var(--shadow);display:flex;flex-direction:column;gap:20px}.message{padding:18px 22px;border-radius:20px;max-width:85%;line-height:1.6;word-wrap:break-word;animation:fadeIn .4s ease;box-shadow:0 2px 8px var(--msg-shadow);position:relative;white-space:pre-wrap;font-size:1.05rem}@keyframes fadeIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.user-message{background-color:var(--user-msg-bg);margin-left:auto;border-bottom-right-radius:8px;color:#fff}.ai-message{background-color:var(--ai-msg-bg);margin-right:auto;border-bottom-left-radius:8px;color:var(--text-color)}.input-container{display:flex;flex-direction:column;background-color:var(--chat-bg);padding:20px;border-radius:15px;box-shadow:0 4px 20px var(--shadow);border:1px solid var(--input-border)}.input-wrapper{display:flex;gap:15px;align-items:flex-end}textarea{flex:1;padding:16px 20px;border:1px solid var(--input-border);border-radius:25px;background-color:var(--input-bg);color:var(--text-color);resize:none;font-size:1.05rem;outline:0;transition:border-color .3s,box-shadow .3s,background-color .3s;min-height:60px;max-height:200px;line-height:1.5}textarea:focus{border-color:var(--accent-color);box-shadow:0 0 0 2px rgba(138,180,248,.2)}textarea:disabled{background-color:var(--disabled-bg);color:var(--disabled-text);cursor:not-allowed}.send-button{background-color:var(--button-bg);color:#fff;border:none;border-radius:50%;width:55px;height:55px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .3s,transform .2s;box-shadow:0 2px 8px var(--shadow)}.send-button:hover{background-color:var(--button-hover);transform:translateY(-2px) scale(1.05)}.send-button:disabled{background-color:var(--disabled-bg);cursor:not-allowed;transform:none}.word-counter{text-align:right;margin-top:12px;font-size:.9rem;color:var(--text-color);opacity:.8}.loading-indicator{display:none;text-align:center;padding:15px;color:var(--accent-color)}.loading-indicator.active{display:block}.typing-dots{display:inline-block;position:relative;width:80px;height:20px}.typing-dots div{position:absolute;top:8px;width:10px;height:10px;border-radius:50%;background:var(--accent-color);animation-timing-function:cubic-bezier(0,1,1,0)}.typing-dots div:nth-child(1){left:8px;animation:typing-dots1 .6s infinite}.typing-dots div:nth-child(2){left:8px;animation:typing-dots2 .6s infinite}.typing-dots div:nth-child(3){left:32px;animation:typing-dots2 .6s infinite}.typing-dots div:nth-child(4){left:56px;animation:typing-dots3 .6s infinite}@keyframes typing-dots1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes typing-dots3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes typing-dots2{0%{transform:translate(0,0)}100%{transform:translate(24px,0)}}@media (max-width:600px){.chat-container{padding:15px}.messages-container{padding:20px}.message{max-width:95%;padding:15px 18px}header{padding:15px 20px}h1{font-size:1.4rem}}.messages-container::-webkit-scrollbar{width:8px}.messages-container::-webkit-scrollbar-track{background:0 0;border-radius:10px}.messages-container::-webkit-scrollbar-thumb{background:var(--input-border);border-radius:10px}.messages-container::-webkit-scrollbar-thumb:hover{background:var(--accent-color)}</style></head><body><header><h1>Чат с GPT-5 Nano</h1><button class="theme-toggle" id="themeToggle">Светлая тема</button></header><div class="chat-container"><div class="messages-container" id="messagesContainer"><div class="message ai-message">Привет! Я GPT-5 Nano. Чем могу вам помочь сегодня?</div></div><div class="loading-indicator" id="loadingIndicator"><div class="typing-dots"><div></div><div></div><div></div><div></div></div></div><div class="input-container"><div class="input-wrapper"><textarea id="messageInput" placeholder="Введите ваше сообщение..." rows="1"></textarea> <button class="send-button" id="sendButton"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 21L23 12L2 3V10L17 12L2 14V21Z" fill="white"/></svg></button></div><div class="word-counter"><span id="wordCount">0</span>/500 слов</div></div></div><script src="https://js.puter.com/v2/"></script><script>const messagesContainer=document.getElementById("messagesContainer"),messageInput=document.getElementById("messageInput"),sendButton=document.getElementById("sendButton"),wordCount=document.getElementById("wordCount"),loadingIndicator=document.getElementById("loadingIndicator"),themeToggle=document.getElementById("themeToggle");let isLightTheme=!1,conversationHistory=[{role:"assistant",content:"Привет! Я GPT-5 Nano. Чем могу вам помочь сегодня?"}];function addMessage(e,t){const n=document.createElement("div");n.classList.add("message"),n.classList.add(t?"user-message":"ai-message"),n.textContent=e,messagesContainer.appendChild(n),messagesContainer.scrollTop=messagesContainer.scrollHeight,(t||0<e.length)&&conversationHistory.push({role:t?"user":"assistant",content:e})}function countWords(e){return e.trim().split(/\s+/).filter(e=>0<e.length).length}function setInputState(e){messageInput.disabled=e,(sendButton.disabled=e)?messageInput.placeholder="ИИ генерирует ответ...":(messageInput.placeholder="Введите ваше сообщение...",messageInput.focus())}async function sendMessage(){var t=messageInput.value.trim();if(""!==t)if(500<countWords(t))alert("Превышен лимит в 500 слов");else{addMessage(t,!0),messageInput.value="",updateWordCount();const o=document.createElement("div");o.classList.add("message","ai-message"),messagesContainer.appendChild(o),loadingIndicator.classList.add("active"),setInputState(!0);try{var n=`${conversationHistory.map(e=>`${"user"===e.role?"Пользователь":"Ассистент"}: ${e.content}`).join("\n\n")}\n\nПользователь: ${t}\n\nАссистент:`,s=await puter.ai.chat(n,{model:"gpt-5-nano",stream:!0});let e="";for await(const a of s)a?.text&&(e+=a.text,o.textContent=e,messagesContainer.scrollTop=messagesContainer.scrollHeight);conversationHistory.push({role:"assistant",content:e})}catch(e){console.error("Ошибка при обращении к API:",e),o.textContent="Извините, произошла ошибка при обработке вашего запроса. Пожалуйста, попробуйте еще раз.",conversationHistory.push({role:"assistant",content:"Извините, произошла ошибка при обработке вашего запроса."})}finally{loadingIndicator.classList.remove("active"),setInputState(!1)}}}function updateWordCount(){var e=countWords(messageInput.value);wordCount.textContent=e,wordCount.style.color=450<e?"#ff6b6b":400<e?"#ffa500":""}function toggleTheme(){isLightTheme=!isLightTheme,isLightTheme?(document.body.classList.add("light-theme"),themeToggle.textContent="Темная тема"):(document.body.classList.remove("light-theme"),themeToggle.textContent="Светлая тема")}function autoResizeTextarea(){messageInput.style.height="auto",messageInput.style.height=messageInput.scrollHeight+"px"}sendButton.addEventListener("click",sendMessage),messageInput.addEventListener("input",function(){updateWordCount(),autoResizeTextarea()}),messageInput.addEventListener("keydown",function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),sendMessage())}),themeToggle.addEventListener("click",toggleTheme),messageInput.focus(),updateWordCount()</script></body></html>
